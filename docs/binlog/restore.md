## MySQL Binlog Restore

The `binlog restore` command is used as part of the point-in-time recovery process. Please review the following prerequisites carefully.

### Prerequisites

1. Ensure that binary logging is disabled in MySQL when running the command by starting the MySQL server with the `--skip-log-bin` option.

2. The restore command requires the current binlog file name and start position. You can provide these via the `--start-binlog` and `--start-position` command options, or by supplying a backup dump file generated by `mysqldump` with the `--all-databases` and `--master-data=2` options. This enables the restore command to identify the correct binlog file and start position, ensuring a seamless restoration process.

### Usage

Before running the command, export the following environment variable:

```bash
# Example: user:password@tcp(127.0.0.1)/
export DATABASE_DSN="database-dsn"
```

#### Restore database from binlogs with specified start binlog and position

```bash
onedump binlog restore --dir="/path/to/binlogs" --start-binlog="mysql-bin.0000003" --start-position=1234
```

#### Restore database from binlogs using a dump file

```bash
onedump binlog restore --dir="/path/to/binlogs" --dump-file="path/to/dump-file.sql"
```

#### Output binlog events without applying them

This is useful if you want to pipe the events to the `mysql` command manually. For example, if MySQL is running in a Docker container and you cannot use the `--mysql-path` option to apply the binlog events.

```bash
onedump binlog restore --dir="/path/to/binlogs" --dump-file="path/to/dump-file.sql" --dry-run=true
```

If you want to pipe the result to a running MySQL container

```bash
onedump binlog restore --dir="/path/to/binlogs" --dump-file="path/to/dump-file.sql" | docker exec -i <mysql-container-name> mysql -u<user> -p<password>
```

#### View all available options
Run `onedump binlog restore --help` to see all available options.

